<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mis Reservas | Capt. Wayne Charters</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Outfit', sans-serif;
      background-image: url('https://media.istockphoto.com/id/184600243/photo/coral-reef-roatan-honduras.jpg?s=612x612&w=0&k=20&c=-tvn8IxjLPQnW-NWD2cqKaR7ZXRY0X2OFh2cIvfiqh4=');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: #1f2937;
    }
    .logo-text { font-family: 'Times New Roman', serif; font-size: 1.2rem; font-weight: bold; color: #facc15; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
    #menu-toggle { display: none; }
    .menu-icon { display: none; font-size: 28px; cursor: pointer; user-select: none; color: white; }

    @media (max-width: 767px) {
      .menu-icon { display: block; }
      nav ul {
        display: none;
        flex-direction: column;
        background: rgba(0,0,0,0.85);
        position: absolute;
        top: 60px;
        right: 0;
        left: 0;
        margin: 0;
        padding: 1rem 0;
        border-top: 1px solid #facc15;
        z-index: 9999;
      }
      nav ul li { margin: 0.5rem 0; text-align: center; }
      #menu-toggle:checked + label + ul { display: flex; }
      nav ul li a { display: block; padding: 0.5rem 1rem; }
    }

    .bg-glass { background: rgba(255,255,255,0.4); backdrop-filter: blur(6px); }
    .transparent-banner { background: rgba(10,100,90,0.85); backdrop-filter: blur(3px); }

    /* Dropdown perfil */
    .profile-container { position: relative; }
    .profile-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background-color: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      min-width: 160px;
      z-index: 50;
      flex-direction: column;
    }
    .profile-dropdown a, .profile-dropdown button {
      padding: 0.5rem 1rem;
      text-align: left;
      width: 100%;
      color: #1f2937;
      text-decoration: none;
      font-size: 0.9rem;
    }
    .profile-dropdown a:hover, .profile-dropdown button:hover { background-color: #facc15; color: #1f2937; }
    .profile-btn { background: transparent; border: none; cursor: pointer; }
  </style>
</head>
<body class="text-gray-800">

  <!-- Navbar -->
  <header id="main-header" class="fixed top-0 left-0 w-full z-50 bg-transparent transition-colors duration-300">
    <nav class="flex flex-wrap justify-center items-center px-4 md:px-6 py-4 text-white relative gap-2 md:gap-6">
      <input type="checkbox" id="menu-toggle" class="hidden" />
      <label for="menu-toggle" class="menu-icon md:hidden ml-auto text-3xl cursor-pointer text-white">&#9776;</label>

      <ul class="hidden md:flex font-medium text-sm md:text-base items-center space-x-4 md:space-x-6">
        <li><a href="index.html" class="hover:text-yellow-300 transition">Inicio</a></li>
        <li><a href="tours.html" class="hover:text-yellow-300 transition">Tours</a></li>
        <li><a href="galeria.html" class="hover:text-yellow-300 transition">Galería</a></li>
        <li><a href="mapa.html" class="hover:text-yellow-300 transition">Mapa</a></li>
        <li><a href="sobrenosotros.html" class="hover:text-yellow-300 transition">Sobre Nosotros</a></li>
        <li><a href="misreservas.html" class="hover:text-yellow-300 transition">Mis Reservas</a></li>
        <li><a href="contacto.html" class="hover:text-yellow-300 transition">Contacto</a></li>
        <li><a href="calendario.html" class="hover:text-yellow-300 transition">Calendario</a></li>
        <li>
          <a href="carrito.html" class="relative flex items-center hover:text-yellow-400 transition">
            🛒 <span class="ml-1">Carrito</span>
            <span id="cart-count" class="ml-1 bg-yellow-400 text-xs text-black px-2 py-0.5 rounded-full">0</span>
          </a>
        </li>

        <!-- Perfil -->
        <li id="li-profile" class="profile-container">
          <button id="profile-toggle" class="profile-btn" aria-haspopup="true" aria-expanded="false" title="Perfil de Usuario">
            <svg viewBox="0 0 64 64" width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="32" cy="32" r="30" stroke="currentColor" stroke-width="4"/>
              <circle cx="32" cy="22" r="8" stroke="currentColor" stroke-width="4" fill="none"/>
              <path d="M12 48c4-8 12-12 20-12s16 4 20 12" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"/>
            </svg>
          </button>
          <div id="profile-dropdown" class="profile-dropdown flex flex-col">
            <a href="perfil.html">Mi perfil</a>
            <a href="misreservas.html">Mis reservas</a>
            <a href="configuracion.html">Configuración</a>
            <button id="logout-btn">Cerrar sesión</button>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <script>
    const header = document.getElementById('main-header');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        header.classList.remove('bg-transparent');
        header.classList.add('bg-black', 'bg-opacity-30');
      } else {
        header.classList.add('bg-transparent');
        header.classList.remove('bg-black', 'bg-opacity-30');
      }
    });

    // Dropdown perfil
    const profileBtn = document.getElementById("profile-toggle");
    const profileDropdown = document.getElementById("profile-dropdown");
    profileBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      profileDropdown.style.display = profileDropdown.style.display === "flex" ? "none" : "flex";
    });
    document.addEventListener("click", () => { profileDropdown.style.display = "none"; });
  </script>

  <!-- Título (banner azul con clase transparent-banner) -->
  <section class="relative text-white py-12 text-center shadow-md mx-6 md:mx-20 mt-28 rounded-lg transparent-banner">
    <h1 class="text-4xl font-extrabold tracking-tight relative z-10">Mis Reservas</h1>
    <p class="text-lg mt-2 relative z-10">Aquí están los tours que has agregado</p>
  </section>

  <!-- Contenedor reservas (banner blanco con clase bg-glass) -->
  <section class="py-12 px-6 md:px-20 mx-6 md:mx-20 rounded-lg shadow-lg bg-glass">
    <div id="reservas-list" class="space-y-6"></div>
    <p id="no-reservas" class="text-center text-gray-600 mt-6 text-lg" style="display:none;">No tienes reservas todavía.</p>

    <div class="mt-8 flex justify-between items-center max-w-md mx-auto">
      <span class="font-semibold text-xl">Total: $<span id="total-price">0.00</span> USD</span>
      <button id="vaciar-carrito" class="bg-red-600 hover:bg-red-700 text-white px-5 py-2 rounded-full font-semibold" disabled>
        Vaciar Reservas
      </button>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-100 text-gray-700 text-center py-6 mt-12 rounded-lg mx-6 md:mx-20">
    <p class="text-sm">&copy; 2025 Capt. Wayne Charters. Todos los derechos reservados.</p>
  </footer>

  <!-- Script reservas -->
  <script>
    const reservasList = document.getElementById('reservas-list');
    const noReservas = document.getElementById('no-reservas');
    const totalPriceSpan = document.getElementById('total-price');
    const vaciarBtn = document.getElementById('vaciar-carrito');
    const cartCountSpan = document.getElementById('cart-count');

    const getReservas = () => JSON.parse(localStorage.getItem('cart')) || [];
    const saveReservas = (reservas) => localStorage.setItem('cart', JSON.stringify(reservas));

    function mostrarReservas() {
      const reservas = getReservas();
      reservasList.innerHTML = '';

      if (reservas.length === 0) {
        noReservas.style.display = 'block';
        totalPriceSpan.textContent = '0.00';
        vaciarBtn.disabled = true;
        cartCountSpan.textContent = '0';
        return;
      }

      noReservas.style.display = 'none';
      vaciarBtn.disabled = false;
      cartCountSpan.textContent = reservas.length;

      let total = 0;

      reservas.forEach((reserva, index) => {
        total += reserva.price * (reserva.quantity || 1);
        const reservaDiv = document.createElement('div');
        reservaDiv.className = 'flex justify-between items-center bg-white rounded p-4 shadow';
        reservaDiv.innerHTML = `
          <div>
            <p class="font-semibold text-lg">${reserva.title || reserva.name}</p>
            <p class="text-gray-600">Precio: $${reserva.price.toFixed(2)} USD</p>
            <p class="text-gray-600">Cantidad: ${reserva.quantity || 1}</p>
          </div>
          <button class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded" data-index="${index}">Eliminar</button>
        `;
        reservasList.appendChild(reservaDiv);
      });

      totalPriceSpan.textContent = total.toFixed(2);

      document.querySelectorAll('button[data-index]').forEach(btn => {
        btn.addEventListener('click', e => {
          const idx = parseInt(e.target.getAttribute('data-index'));
          eliminarReserva(idx);
        });
      });
    }

    function eliminarReserva(idx) {
      let reservas = getReservas();
      reservas.splice(idx, 1);
      saveReservas(reservas);
      mostrarReservas();
    }

    vaciarBtn.addEventListener('click', () => {
      if (confirm('¿Estás seguro que deseas vaciar todas las reservas?')) {
        localStorage.removeItem('cart');
        mostrarReservas();
      }
    });

    window.onload = mostrarReservas;
  </script>

</body>
</html>
