<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editar Perfil | Capt. Wayne Charters</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Outfit', sans-serif;
      background-image: url('https://media.istockphoto.com/id/184600243/photo/coral-reef-roatan-honduras.jpg?s=612x612&w=0&k=20&c=-tvn8IxjLPQnW-NWD2cqKaR7ZXRY0X2OFh2cIvfiqh4=');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: #1f2937;

      display: flex;
      flex-direction: column;
      align-items: center;

      min-height: 100vh;
      margin: 0;
      padding-top: 5rem;
      box-sizing: border-box;
    }
    .bg-blur {
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(6px);
      border-radius: 1rem;
      padding: 2rem;
      width: 100%;
      max-width: 900px;
      box-sizing: border-box;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      margin-bottom: 1rem;
    }
    a.back-link {
      color: #0f766e;
      font-weight: 600;
      margin-bottom: 2rem;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    a.back-link:hover {
      text-decoration: underline;
      color: #14b8a6;
    }
    footer {
      background-color: #0f766e;
      color: white;
      text-align: center;
      padding: 1.5rem 1rem;
      border-radius: 0.75rem 0.75rem 0 0;
      width: 100%;
      box-sizing: border-box;
      margin-top: auto;
    }

    /* Estilos para el selector de tel√©fono con dropdown */
    .phone-input-container {
      position: relative;
      width: 100%;
      max-width: 320px;
      font-family: Arial, sans-serif;
      margin-top: 0.25rem;
    }
    .prefix-button {
      position: absolute;
      left: 0;
      top: 0;
      height: 38px;
      width: 130px;
      background: white;
      border: 1px solid #ccc;
      border-right: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 8px;
      font-size: 16px;
      user-select: none;
      border-radius: 0.375rem 0 0 0.375rem;
    }
    .phone-input {
      padding-left: 140px;
      height: 38px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 0.375rem;
      width: 100%;
      box-sizing: border-box;
    }
    .dropdown {
      display: none;
      position: absolute;
      top: 42px;
      left: 0;
      width: 130px;
      max-height: 180px;
      overflow-y: auto;
      background: white;
      border: 1px solid #ccc;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      border-radius: 0 0 0.375rem 0.375rem;
      z-index: 1000;
      font-size: 14px;
      user-select: none;
    }
    .dropdown div {
      padding: 6px 8px;
      cursor: pointer;
      display: flex;
      justify-content: flex-start;
    }
    .dropdown div:hover {
      background-color: #0f766e;
      color: white;
    }
  </style>
</head>
<body>

  <section class="bg-blur">
    <h1 class="text-4xl font-extrabold tracking-tight text-teal-800 mb-6 text-center">Editar Perfil</h1>

    <form class="space-y-6" id="edit-profile-form">
      
      <!-- Foto de Perfil -->
     

      <!-- Campos de texto -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <label class="block">
          <span class="text-gray-700 font-semibold">Nombre Completo</span>
          <input type="text" id="full-name" placeholder="Tu nombre completo" class="mt-1 block w-full border rounded p-2" />
        </label>

        <label class="block">
          <span class="text-gray-700 font-semibold">Nombre de Usuario</span>
          <input type="text" id="username" placeholder="Tu nombre de usuario" class="mt-1 block w-full border rounded p-2" />
        </label>

        <label class="block">
          <span class="text-gray-700 font-semibold">Correo Electr√≥nico</span>
          <input type="email" id="email" placeholder="tuemail@ejemplo.com" class="mt-1 block w-full border rounded p-2" />
        </label>

        <!-- Tel√©fono con selector de pa√≠s y dropdown -->
        <label class="block">
          <span class="text-gray-700 font-semibold">Tel√©fono</span>
          <div class="phone-input-container">
            <div id="prefixBtn" class="prefix-button">+506 üá®üá∑</div>
            <input type="tel" id="phone" class="phone-input" placeholder="Escribe tu n√∫mero" />
            <div id="dropdown" class="dropdown">
              <!-- Opciones llenadas con JS -->
            </div>
          </div>
          <small id="phone-hint" class="text-gray-500"></small>
        </label>

        <label class="block md:col-span-2">
          <span class="text-gray-700 font-semibold">Biograf√≠a</span>
          <textarea id="bio" rows="3" placeholder="Cu√©ntanos sobre ti..." class="mt-1 block w-full border rounded p-2 resize-none"></textarea>
        </label>

        <!-- Secci√≥n Idioma ampliada -->
        <label class="block">
          <span class="text-gray-700 font-semibold">Idioma Preferido</span>
          <select id="language" class="mt-1 block w-full border rounded p-2">
            <option value="">Seleccione idioma</option>
            <option value="af">Afrik√°ans</option>
            <option value="ar">√Årabe</option>
            <option value="bn">Bengal√≠</option>
            <option value="zh">Chino</option>
            <option value="cs">Checo</option>
            <option value="da">Dan√©s</option>
            <option value="nl">Holand√©s</option>
            <option value="en">Ingl√©s</option>
            <option value="fr">Franc√©s</option>
            <option value="de">Alem√°n</option>
            <option value="el">Griego</option>
            <option value="hi">Hindi</option>
            <option value="hu">H√∫ngaro</option>
            <option value="id">Indonesio</option>
            <option value="it">Italiano</option>
            <option value="ja">Japon√©s</option>
            <option value="ko">Coreano</option>
            <option value="ms">Malayo</option>
            <option value="no">Noruego</option>
            <option value="fa">Persa</option>
            <option value="pl">Polaco</option>
            <option value="pt">Portugu√©s</option>
            <option value="ro">Rumano</option>
            <option value="ru">Ruso</option>
            <option value="es">Espa√±ol</option>
            <option value="sv">Sueco</option>
            <option value="ta">Tamil</option>
            <option value="th">Tailand√©s</option>
            <option value="tr">Turco</option>
            <option value="uk">Ucraniano</option>
            <option value="vi">Vietnamita</option>
          </select>
        </label>

        <label class="block">
          <span class="text-gray-700 font-semibold">Zona Horaria</span>
          <select id="timezone" class="mt-1 block w-full border rounded p-2">
            <option value="">Seleccione zona horaria</option>
            <option value="GMT-6">GMT -6 (Costa Rica)</option>
            <option value="GMT-5">GMT -5 (Colombia, Ecuador)</option>
            <option value="GMT-3">GMT -3 (Argentina, Brasil)</option>
            <option value="GMT+1">GMT +1 (Espa√±a, Francia)</option>
            <option value="GMT+9">GMT +9 (Jap√≥n)</option>
          </select>
        </label>

        <label class="block">
          <span class="text-gray-700 font-semibold">G√©nero</span>
          <select id="gender" class="mt-1 block w-full border rounded p-2">
            <option value="">Seleccione g√©nero</option>
            <option value="female">Femenino</option>
            <option value="male">Masculino</option>
            <option value="nonbinary">No binario</option>
            <option value="prefer-not">Prefiero no decir</option>
          </select>
        </label>
      </div>

      <!-- Cambiar Contrase√±a -->
      <fieldset class="border border-gray-300 rounded p-4 space-y-4">
        <legend class="text-teal-700 font-semibold">Cambiar Contrase√±a</legend>

        <label class="block">
          <span class="text-gray-700">Contrase√±a Actual</span>
          <input type="password" id="current-password" class="mt-1 block w-full border rounded p-2" />
        </label>

        <label class="block">
          <span class="text-gray-700">Nueva Contrase√±a</span>
          <input type="password" id="new-password" class="mt-1 block w-full border rounded p-2" />
        </label>

        <label class="block">
          <span class="text-gray-700">Confirmar Nueva Contrase√±a</span>
          <input type="password" id="confirm-password" class="mt-1 block w-full border rounded p-2" />
        </label>
      </fieldset>

      <!-- Preferencias de Privacidad -->
      <fieldset class="border border-gray-300 rounded p-4 space-y-4">
        <legend class="text-teal-700 font-semibold">Privacidad</legend>
        <label class="flex items-center space-x-3">
          <input type="radio" name="privacy" value="public" class="form-radio text-teal-600" />
          <span>P√∫blico</span>
        </label>
        <label class="flex items-center space-x-3">
          <input type="radio" name="privacy" value="friends" class="form-radio text-teal-600" />
          <span>Solo amigos</span>
        </label>
        <label class="flex items-center space-x-3">
          <input type="radio" name="privacy" value="private" class="form-radio text-teal-600" />
          <span>Solo yo</span>
        </label>
      </fieldset>

      <button type="submit" class="bg-teal-600 text-white px-6 py-3 rounded hover:bg-teal-500 transition w-full text-lg font-semibold">
        Guardar Cambios
      </button>
    </form>
  </section>

  <a href="perfil.html" class="back-link">‚Üê Volver a Mi Perfil</a>

  <footer>
    <p class="text-sm">&copy; 2025 Capt. Wayne Charters. Todos los derechos reservados.</p>
  </footer>

  <script>
    // Variables elementos DOM
    const photoUpload = document.getElementById('photo-upload');
    const profilePhotoPreview = document.getElementById('profile-photo-preview');
    const changePhotoBtn = document.getElementById('change-photo-btn');
    const removePhotoBtn = document.getElementById('remove-photo-btn');
    const form = document.getElementById('edit-profile-form');

    const prefixBtn = document.getElementById('prefixBtn');
    const dropdown = document.getElementById('dropdown');
    const phoneInput = document.getElementById('phone');
    const phoneHint = document.getElementById('phone-hint');

    const countries = [
      { name: "Argentina", code: "+54", flag: "üá¶üá∑" },
      { name: "Bolivia", code: "+591", flag: "üáßüá¥" },
      { name: "Brasil", code: "+55", flag: "üáßüá∑" },
      { name: "Chile", code: "+56", flag: "üá®üá±" },
      { name: "Colombia", code: "+57", flag: "üá®üá¥" },
      { name: "Costa Rica", code: "+506", flag: "üá®üá∑" },
      { name: "Ecuador", code: "+593", flag: "üá™üá®" },
      { name: "El Salvador", code: "+503", flag: "üá∏üáª" },
      { name: "Espa√±a", code: "+34", flag: "üá™üá∏" },
      { name: "Estados Unidos", code: "+1", flag: "üá∫üá∏" },
      { name: "Guatemala", code: "+502", flag: "üá¨üáπ" },
      { name: "Honduras", code: "+504", flag: "üá≠üá≥" },
      { name: "M√©xico", code: "+52", flag: "üá≤üáΩ" },
      { name: "Nicaragua", code: "+505", flag: "üá≥üáÆ" },
      { name: "Panam√°", code: "+507", flag: "üáµüá¶" },
      { name: "Paraguay", code: "+595", flag: "üáµüáæ" },
      { name: "Per√∫", code: "+51", flag: "üáµüá™" },
      { name: "Uruguay", code: "+598", flag: "üá∫üáæ" },
      { name: "Venezuela", code: "+58", flag: "üáªüá™" }
    ];

    // Ordenar pa√≠ses alfab√©ticamente
    countries.sort((a,b) => a.name.localeCompare(b.name));

    // Rellenar dropdown con pa√≠ses
    countries.forEach(c => {
      const div = document.createElement('div');
      div.textContent = `${c.code} ${c.flag}`;
      div.title = c.name;
      div.style.padding = '6px 8px';
      div.style.cursor = 'pointer';
      div.style.display = 'flex';
      div.style.justifyContent = 'flex-start';
      div.dataset.code = c.code;
      div.dataset.flag = c.flag;
      div.dataset.name = c.name;

      div.addEventListener('mouseenter', () => {
        div.style.backgroundColor = '#0f766e';
        div.style.color = 'white';
      });
      div.addEventListener('mouseleave', () => {
        div.style.backgroundColor = 'white';
        div.style.color = 'black';
      });

      dropdown.appendChild(div);
    });

    // Mostrar/ocultar dropdown al click en bot√≥n
    prefixBtn.addEventListener('click', () => {
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    });

    // Seleccionar pa√≠s y actualizar bot√≥n
    dropdown.addEventListener('click', e => {
      if(e.target.dataset.code){
        prefixBtn.textContent = `${e.target.dataset.code} ${e.target.dataset.flag}`;
        dropdown.style.display = 'none';
        phoneInput.value = '';
        phoneInput.focus();
        updatePhoneHint();
      }
    });

    // Cerrar dropdown si clic fuera
    document.addEventListener('click', e => {
      if(!prefixBtn.contains(e.target) && !dropdown.contains(e.target)){
        dropdown.style.display = 'none';
      }
    });

    // Actualiza el texto de ayuda del tel√©fono
    function updatePhoneHint(){
      phoneHint.textContent = `C√≥digo pa√≠s: ${prefixBtn.textContent}. Ingresa solo el n√∫mero aqu√≠.`;
    }

    // Carga datos guardados localStorage
    function cargarDatos() {
      const userData = JSON.parse(localStorage.getItem('userProfile'));
      if(userData) {
        if(userData.photo) profilePhotoPreview.src = userData.photo;
        if(userData.fullName) document.getElementById('full-name').value = userData.fullName;
        if(userData.username) document.getElementById('username').value = userData.username;
        if(userData.email) document.getElementById('email').value = userData.email;
        if(userData.phone){
          const parts = userData.phone.trim().split(" ");
          if(parts.length > 1){
            const code = parts[0];
            const number = parts.slice(1).join(" ");
            prefixBtn.textContent = code;
            // Buscar bandera por c√≥digo
            const c = countries.find(c => c.code === code);
            if(c) prefixBtn.textContent = `${code} ${c.flag}`;
            phoneInput.value = number;
          } else {
            phoneInput.value = userData.phone;
          }
        }
        if(userData.bio) document.getElementById('bio').value = userData.bio;
        if(userData.language) document.getElementById('language').value = userData.language;
        if(userData.timezone) document.getElementById('timezone').value = userData.timezone;
        if(userData.gender) document.getElementById('gender').value = userData.gender;
        if(userData.privacy) {
          document.querySelectorAll('input[name="privacy"]').forEach(radio => {
            if(radio.value === userData.privacy) radio.checked = true;
          });
        }
      }
      updatePhoneHint();
    }

    // Guardar datos en localStorage
    function guardarDatos() {
      const privacyRadios = document.getElementsByName('privacy');
      let privacyValue = '';
      privacyRadios.forEach(radio => {
        if(radio.checked) privacyValue = radio.value;
      });

      const phoneFull = prefixBtn.textContent + " " + phoneInput.value.trim();

      const userData = {
        photo: profilePhotoPreview.src,
        fullName: document.getElementById('full-name').value.trim(),
        username: document.getElementById('username').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: phoneFull,
        bio: document.getElementById('bio').value.trim(),
        language: document.getElementById('language').value,
        timezone: document.getElementById('timezone').value,
        gender: document.getElementById('gender').value,
        privacy: privacyValue
      };
      localStorage.setItem('userProfile', JSON.stringify(userData));
      alert('Datos guardados correctamente.');
    }

   
    // Manejar submit
    form.addEventListener('submit', e => {
      e.preventDefault();
      // Aqu√≠ puedes agregar validaciones si quieres

      guardarDatos();
    });

    // Al cargar la p√°gina cargar datos
    window.addEventListener('load', cargarDatos);

  </script>

</body>
</html>
